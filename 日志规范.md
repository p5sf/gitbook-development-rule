# 日志规范

## 异常处理

- 异常不要用来做流程控制，条件控制，因为异常的处理效率比条件分支低
- 捕获异常要及时处理，如果不想处理，请将该异常抛给它的调用者，最外层的业务使用者，必须处理异常
-  try 块放到了事务代码中，catch 异常后，如果需要回滚事务，要注意手动回滚事务
- 不能在 finally 块中使用 return，finally 块中的 return 返回后方法结束执行，不 会再执行 try 块中的 return 语句
- 抛异常还是返回错误码，开发接口使用错误码，而应用内部推荐抛出异常，跨引用优先封装 Result



## 输出日志

- 日志文件推荐至少保存 15 天，因为有些异常具备以“周”为频次发生的特点
- 建议日志命名有利于区分
- 避免重复打印日志，浪费磁盘空间，在 xml文件中 中设置 additivity=false
- 生产环境禁止输出 debug 日志;有选择地输出 info 日志，要注意日志输出量问题

日志输出格式

```java
 logger.debug("Processing trade with id: {} symbol : {} ", id, symbol);
```

> [!tip]
>
> 如果日志级别是 warn，上述日志不会打印，如果symbol 是对象，可能还会浪费系统资源